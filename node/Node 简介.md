## Node 简介

#### 高性能 Web 服务器的几个要素

1. 事件驱动

2. 非阻塞 I/O

#### Node 与浏览器

Node 和 Chrome 都是基于事件驱动的异步架构，浏览器通过事件驱动来服务界面上的交互，Node 通过事件驱动来服务 I/O。

#### Node 的特点

* 异步 I/O

异步调用对于结果值得捕获是符合 Don't call me，I will call you 的原则，这也是注重结果，不关心过程的一种表现。

* 事件与回调函数

事件的编程方式具有轻量级、松耦合、只关注事务点等优势，但是在多个异步任务的场景下，事件与事件之间各自独立，如何协作是一个问题。

回调函数是最好的接受异步调用返回数据的方式。

* 单线程
    
单线程的最大好处是不用像多线程编程那样处处在意状态的同步问题，没有死锁的存在，也没有线程上下文交换所带来的性能开销。

单线程的弱点。    

* 无法利用多核 CPU
* 错误会引起整个应用提出，应用的健壮性值得考验
* 大量计算占用 CPU 导致无法继续调用异步 I/O

	Web Workers 能够创建工作线程来进行计算，可以解决 JavaScript 大量计算阻塞 UI 渲染的问题。工作线程为了不阻塞主线程，通过消息传递的方式来传递运行结果，这也使得工作线程不能访问到主线程中的 UI。

	Node 采用 Web Workers 相同的思路来解决单线程中大量计算的问题：child_process。子进程的出现，Node 可以从容的对单线程在健壮性和无法利用多核 CPU 方面的问题。

* 跨平台 

Node 是基于 libuv 实现跨平台的。

#### 应用场景

* I/O 密集型

	Node 面向网络且擅长并行 I/O，能够有效地组织起更多的硬件资源，从而提供更多好的服务。

	I/O 密集的优势主要在于 Node 利用事件循环的处理能力，而不是启动每一个线程为每一个请求服务，资源占用极少。

* CPU 密集型

	Node 的异步 I/O 解决了单线程上 CPU 与 I/O 之间阻塞无法重叠利用的问题， I/O 阻塞造成的性能浪费远比 CPU 的影响小。

	利用子进程的方式，将一部分 Node 进程当做常驻服务进程用于计算，然后利用进程间的消息来传递结果，将计算与 I/O 分离，充分利用多 CPU。

	CPU 密集不可怕，合理调度是诀窍。

* 与遗留系统和平共处

* 分布式应用

	高效利用并行 I/O。

#### Node 的使用者

1. 前后端编程语言环境统一

2. Node 带来的高性能 I/O 用于实时应用

3. 并行 I/O 使得使用者可以更高效地利用分布式环境

4. 并行 I/O 有效利用稳定接口提升 Web 渲染能力

5. 云计算平台提供 Node 支持

6. 游戏开发领域

7. 工具类应用